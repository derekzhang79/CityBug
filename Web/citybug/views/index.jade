.container
    .content
        header.page-header
            h1 City Bug
                small.subtitle bug around the world
        script

            var socket = io.connect();
            socket.on('connect', function () {
            });
            socket.on('user message', function(entry) {
                addRow(entry);
            });
            function sendMessage() {
                socket.emit('user message');
            }
            function addMessage() {
                $('#entrytable').appendChild('qqqqqqqqqqqq');
            }
            function addRow(entry) {
                if (!document.getElementsByTagName) 
                    return;
                var tabBody=document.getElementById("entrytable");
                var row=document.createElement("TR");

                var cellTitle = document.createElement("TD");
                var cellThumbnailImage = document.createElement("TD");
                var cellFullImage = document.createElement("TD");
                var cellLatitude = document.createElement("TD");
                var cellLongitude = document.createElement("TD");
                var cellNote = document.createElement("TD");
                var cellCategories = document.createElement("TD");

                var textnodeTitle=document.createTextNode(entry['title']);
                var thumbnailImage=document.createElement('img');
                thumbnailImage.src = entry['thumbnail_image'];
                thumbnailImage.width = 40;
                thumbnailImage.heigth = 40;
                var fullImage=document.createElement('img');
                fullImage.src = entry['full_image'];
                fullImage.width = 40;
                fullImage.heigth = 40;
                var textnodeLatitude=document.createTextNode(entry['latitude']);
                var textnodeLongitude=document.createTextNode(entry['longitude']);
                var textnodeNote=document.createTextNode(entry['note']);
                var textnodeCategories=document.createTextNode(entry['categories']);

                cellTitle.appendChild(textnodeTitle);
                cellThumbnailImage.appendChild(thumbnailImage);
                cellFullImage.appendChild(fullImage);
                cellLatitude.appendChild(textnodeLatitude);
                cellLongitude.appendChild(textnodeLongitude);
                cellNote.appendChild(textnodeNote);
                cellCategories.appendChild(textnodeCategories);

                row.appendChild(cellTitle);
                row.appendChild(cellThumbnailImage);
                row.appendChild(cellFullImage);
                row.appendChild(cellLatitude);
                row.appendChild(cellLongitude);
                row.appendChild(cellNote);
                row.appendChild(cellCategories);
                tabBody.appendChild(row);
            }
        h2
            <a href="/add">Click here to test POST api</a>
        article.row
            .span14
                h2 Entry list
                - if (entry.length)
                    table.zebra-striped
                        thead
                            tr
                                th Title
                                th Thumbnail image
                                th Full image
                                th Latitude
                                th Longitude
                                th Note
                                th Categories
                        tbody#entrytable
                            - entry.forEach(function(entry){
                                tr.xx
                                    td= entry['title']
                                    td
                                        img(src="#{entry.thumbnail_image}", width = "40", heigth = "40")
                                    td
                                        img(src="#{entry.full_image}", width = "40", heigth = "40")
                                    td= entry['latitude']
                                    td= entry['longitude']
                                    td= entry['note']
                                    td= entry['categories']
                            - })
                - else
                    p No registered members yet.
    
        form(action='/', method='post', enctype="multipart/form-data")
            fieldset
                label(for="title") Title
                .input
                    input(type='text', id='title', name='title')
                label(for="thumbnail_image") Thumbnail image
                .input
                    input(type='file', id='thumbnail_image', name='thumbnail_image')
                label(for="full_image") Full image
                .input
                    input(type='file', id='full_image', name='full_image')
                label(for="latitude") Latitude
                .input
                    input(type='text', id='latitude', name='latitude')
                label(for="longitude") Longitude
                .input
                    input(type='text', id='longitude', name='longitude')
                label(for="note") Note
                .input
                    input(type='text', id='note', name='note')
                label(for="categories") Categories
                .input
                    input(type='text', id='categories', name='categories')
            fieldset
                .actions
                    input(type='button', value="Add", onclick='addRow("111111","2222222")')
                    input(type='submit', value="Save", onclick='sendMessage()')
